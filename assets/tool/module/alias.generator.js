// Generated by CoffeeScript 1.6.3
/*
alias = {
  "jquery": "vendor/Zonda/vendor/jquery/1.9.1/jquery",
  "underscore": "vendor/Zonda/vendor/underscore/1.4.4/underscore"
}
*/

var CONFIG, colors, fs, main, path, project_dir;

require("js-yaml");

fs = require("fs");

path = require("path");

colors = require("colors");

project_dir = path.resolve('./', '../');

CONFIG = require("" + project_dir + "/etc/zonda.yml");

main = function(vendor_root_dir, relative_root_dir) {
  var alias, dependencies, info, list, vendor_name, version_list, _i, _len;
  console.log("\n   Scanning the vendor/...");
  alias = {};
  dependencies = {};
  info = {};
  list = fs.readdirSync(vendor_root_dir);
  for (_i = 0, _len = list.length; _i < _len; _i++) {
    vendor_name = list[_i];
    version_list = fs.readdirSync("" + vendor_root_dir + "/" + vendor_name);
    if (CONFIG.pattern === "dev") {
      alias[vendor_name] = "" + relative_root_dir + "/" + vendor_name + "/" + version_list[0] + "/src/" + vendor_name;
      dependencies[vendor_name] = "" + vendor_name;
      info[vendor_name] = "" + version_list[0];
    } else {
      alias[vendor_name] = "" + relative_root_dir + "/" + vendor_name + "/" + version_list[0] + "/" + vendor_name;
      dependencies[vendor_name] = "" + vendor_name;
      info[vendor_name] = "" + version_list[0];
    }
  }
  console.log("   >>".bold + " Success!".green);
  delete alias.sea;
  delete dependencies.sea;
  delete info.sea;
  return {
    alias: alias,
    dependencies: dependencies,
    info: info
  };
};

module.exports = main;
