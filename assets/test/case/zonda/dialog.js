// Generated by CoffeeScript 1.6.3
define(function(require) {
  var Dialog, Util;
  module("Dialog");
  Util = require("util");
  Dialog = Util.Dialog;
  test("API", function() {
    ok(Dialog.open);
    ok(Dialog.close);
    strictEqual(typeof Dialog.open, "function");
    return strictEqual(typeof Dialog.close, "function");
  });
  test("Dialog Render", function() {
    stop();
    Dialog({
      title: "small",
      content: "big",
      button: {
        "hehe": function() {}
      }
    }).open();
    $("#zonda-util-dialog").on("shown.bs.modal", function() {
      ok(Dialog.$dom[0]);
      strictEqual(Dialog.$dom.find(".modal-title").text(), "small");
      ok(/big/.test(Dialog.$dom.find(".modal-body").text()));
      ok(/hehe/.test(Dialog.$dom.find(".modal-footer button[id]").text()));
      return Dialog.close();
    });
    return $("#zonda-util-dialog").on("hidden.bs.modal", start);
  });
  test("Dialog Style", function() {
    stop();
    Dialog({
      title: "small",
      content: "big",
      "class": "haha",
      button: {
        "hehe": function() {}
      }
    }).open();
    $("#zonda-util-dialog").on("shown.bs.modal", function() {
      ok(Dialog.$dom.hasClass("haha"));
      return Dialog.close();
    });
    return $("#zonda-util-dialog").on("hidden.bs.modal", start);
  });
  test("Dialog button callback", function() {
    var num;
    stop();
    num = 1;
    Dialog({
      title: "small",
      content: "big",
      "class": "haha",
      button: {
        "hehe": function() {
          return num = 2;
        }
      }
    }).open();
    $("#zonda-util-dialog").on("shown.bs.modal", function() {
      Dialog.$dom.find(".modal-footer button.btn-primary").trigger("click");
      strictEqual(num, 2);
      ok(Dialog.$dom.find(".modal-footer button.btn-primary").hasClass("disabled"));
      return Dialog.close();
    });
    return $("#zonda-util-dialog").on("hidden.bs.modal", start);
  });
  test("Dialog button for cancel", function() {
    stop();
    Dialog({
      title: "small",
      content: "big"
    }).open();
    $("#zonda-util-dialog").on("shown.bs.modal", function() {
      return Dialog.$dom.find(".modal-footer button[aria-hidden=true]").trigger("click");
    });
    return $("#zonda-util-dialog").on("hidden.bs.modal", function() {
      var id;
      id = Dialog.$dom.attr("id");
      ok(!$("#" + id)[0]);
      return start();
    });
  });
  test("Dialog Close Delay", function() {
    stop();
    Dialog({
      title: "Test the 'Delay Close'",
      content: "This dialog will auto close after 2 seconds."
    }).open();
    Dialog.close(2000);
    return $("#zonda-util-dialog").on("hidden.bs.modal", function() {
      var id;
      id = Dialog.$dom.attr("id");
      ok(!$("#" + id)[0]);
      return start();
    });
  });
  test("Dialog Config", function() {
    stop();
    Dialog({
      title: "small",
      content: "big"
    }).open();
    $("#zonda-util-dialog").on("shown.bs.modal", function() {
      deepEqual(Dialog.config, {
        title: "small",
        content: "big"
      });
      return Dialog.close();
    });
    return $("#zonda-util-dialog").on("hidden.bs.modal", start);
  });
  test("Chain Style", function() {
    stop();
    Dialog({
      title: "Test Chain Style Method",
      content: "This dialog will auto open, and auto close after 1.3 seconds."
    }).open().close(1300);
    $("#zonda-util-dialog").on("shown.bs.modal", function() {
      return ok(Dialog.$dom[0]);
    });
    return $("#zonda-util-dialog").on("hidden.bs.modal", function() {
      var id;
      id = Dialog.$dom.attr("id");
      ok(!$("#" + id)[0]);
      return start();
    });
  });
  return test("Add class to button", function() {
    stop();
    Dialog({
      title: "Add other Class to button",
      content: "Has some colorful buttons~~~",
      button: {
        "Danger[~btn-danger]": function() {},
        "Warning[~btn-warning]": function() {},
        "Info[~btn-info]": function() {},
        "Success[~btn-success]": function() {},
        "Link[~btn-link]": function() {},
        "Default[~btn-default]": function() {},
        "hehe[~]": function() {}
      }
    }).open();
    $("#zonda-util-dialog").on("shown.bs.modal", function() {
      ok(Dialog.$dom.find(".btn-danger")[0]);
      ok(Dialog.$dom.find(".btn-warning")[0]);
      ok(Dialog.$dom.find(".btn-info")[0]);
      ok(Dialog.$dom.find(".btn-success")[0]);
      ok(Dialog.$dom.find(".btn-link")[0]);
      ok(Dialog.$dom.find(".btn-default")[0]);
      return Dialog.close(1300);
    });
    return $("#zonda-util-dialog").on("hidden.bs.modal", start);
  });
});
