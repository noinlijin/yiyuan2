// Generated by CoffeeScript 1.6.2
define(function(require, exports, module) {
  var $, Mustache, timer;

  $ = require("jquery");
  Mustache = require("mustache");
  timer = "";
  return module.exports = function(config) {
    var evt, index, _i, _ref,
      _this = this;

    if (config.page.event) {
      evt = config.page.event;
    } else {
      evt = "mouseover";
    }
    for (index = _i = 0, _ref = this.length; 0 <= _ref ? _i < _ref : _i > _ref; index = 0 <= _ref ? ++_i : --_i) {
      $(config.page.sel).append(Mustache.render(config.page.tpl, {
        page: index
      }));
    }
    $(config.page.sel).children().each(function(index) {
      return $(config.page.sel).children().eq(index).on(evt, function() {
        clearTimeout(timer);
        return timer = setTimeout(function() {
          _this.goto(index);
          return _this.autoPlay();
        }, 300);
      });
    });
    return this.on("" + config.sel + ":goto:slide:success", function(now) {
      $(config.page.sel).find(".active").removeClass("active");
      return $(config.page.sel).children().eq(now.index).addClass("active");
    });
  };
});
